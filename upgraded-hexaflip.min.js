(function(){var h,l,u,x,C,M,g,d,t,e,r,s,i,n,E;function o(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return 0==e?t.toLowerCase():t.toUpperCase()}).replace(/\s+/g,"")}for((u="hexaFlip")[0].toUpperCase()+u.slice(1),r=["webkit","Moz","O","ms"],s=function(t){var e,s,i;if(null!=document.body.style[o(t)])return o(t);for(e=0,s=r.length;e<s;e++)if(i=r[e]+t,null!=document.body.style[i])return i;return!1},x={},t=0,e=(n=["Transform","Perspective","PerspectiveOrigin"]).length;t<e;t++)x[(i=n[t]).toLowerCase()]=s(i);M={size:200,margin:10,fontSize:132,perspective:1e3,perspectiveOrigin:"50% 50%",touchSensitivity:1,horizontalFlip:!1,domEvents:null,yearMin:0,yearMax:(new Date).getFullYear()},C=u.toLowerCase(),d=(g=["front","bottom","back","top","left","right"]).slice(0,4),E=/(^(?:(?:(?:(?:https?)|(?:file)):)?\/\/)|^(?:data:)|^(?:(?:\.\.?)?\/))(?:.+)/i,l=function(){function T(t,e,s){var i,r,n,o,a,h,l,u,d,f,p,c,y,g,v,m,b,w;if(this.el=t,this.sets=e,this.options=null!=s?s:{},x.transform&&this.el){if(!(this instanceof T))return function(t,e,s){s.prototype=t.prototype;var i=new s,r=t.apply(i,e);return Object(r)===r?r:i}(T,arguments,function(){});for(d in"string"==typeof this.el&&(this.el=document.querySelector(this.el)),M)M[d],this[d]=null!=(f=this.options[d])?f:M[d];if("number"==typeof this.fontSize&&(this.fontSize+="px"),!this.sets){this.el.classList.add(C+"-timepicker");var _=this.yearMin,S=this.yearMax;this.sets={year:function(){var t,e;for(e=[],t=_;t<=S;t++)t<10?e.push("000"+t):t<100?e.push("00"+t):t<1e3?e.push("0"+t):e.push(""+t);return e}(),month:function(){var t,e;for(e=[],t=1;t<=12;t++)t<10?e.push("0"+t):e.push(""+t);return e}(),day:function(){var t,e;for(e=[],t=1;t<=31;t++)t<10?e.push("0"+t):e.push(""+t);return e}(),hour:function(){var t,e;for(e=[],o=t=1;t<=24;o=++t)o<10?e.push("0"+o):e.push(""+o);return e}(),minute:function(){var t,e;for(e=[],o=t=0;t<=60;o=++t)o<10?e.push("0"+o):e.push(""+o);return e}()}}for(h in v=(g=Object.keys(this.sets)).length,r=document.createDocumentFragment(),o=w=0,u=v/2+1,this.cubes={},p=this.sets)for(y=p[h],i=this.cubes[h]=this._createCube(h),++o<u?w++:w--,i.el.style.zIndex=w,this._setContent(i.front,y[0]),r.appendChild(i.el),a=0,l=y.length;a<l;a++)b=y[a],E.test(b)&&((new Image).src=b);this.cubes[g[0]].el.style.marginLeft="0",this.cubes[g[g.length-1]].el.style.marginRight="0",this.el.classList.add(C),this.el.style.height=this.size+"px";var z,L=Math.ceil((this.size+2*this.margin)*v-2*this.margin);if(L=this.sets.year?Math.ceil((this.size+2*this.margin)*(v+1)-2*this.margin):Math.ceil((this.size+2*this.margin)*v-2*this.margin),this.el.style.width=L+"px",this.el.style[x.perspective]=this.perspective+"px",this.el.style[x.perspectiveorigin]=this.perspectiveOrigin,this.el.appendChild(r),this.eProp=this.horizontalFlip?"pageX":"pageY",this.domEvents){for(m in c=this.domEvents,z=this,n=function(s){return z.el.addEventListener(m,function(t){var e;if((e=t.target).classList.contains(C+"-side"))return s.call(z,t,e,e.parentNode.parentNode)},!1)},c)n(c[m]);this.domEvents=null}}}return T.prototype._createCube=function(t){var e,r,s,i,n,o,a,h,l,u,d,f,p,c,y;for((e={set:t,offset:0,start:0,delta:0,last:0,el:document.createElement("div"),holder:document.createElement("div")}).el.className=C+"-cube "+C+"-cube-"+t,e.el.style.margin="0 "+this.margin+"px","year"==t?(e.el.style.width=e.holder.style.width=2*this.size+"px",e.el.style.height=e.holder.style.height=this.size+"px"):e.el.style.width=e.el.style.height=e.holder.style.width=e.holder.style.height=this.size+"px",e.holder.style[x.transform]=this._getTransform(0),(y=document.createElement("div")).classList.add(C+"-side"),o=0,h=g.length;o<h;o++)e[c=g[o]]=y.cloneNode(!1),e[c].classList.add(C+"-side-"+c),p=function(){switch(c){case"front":return"";case"back":return"rotateX(180deg)";case"top":return"rotateX(90deg)";case"bottom":return"rotateX(-90deg)";case"left":return"rotateY(-90deg)";case"right":return"rotateY(90deg)"}}(),e[c].style[x.transform]="right"==c&&"year"==t?p+" translate3d(0, 0, "+3*this.size/2+"px)"+(this.horizontalFlip?"rotateZ(90deg)":""):p+" translate3d(0, 0, "+this.size/2+"px)"+(this.horizontalFlip?"rotateZ(90deg)":""),e[c].style.fontSize=this.fontSize,e.holder.appendChild(e[c]);e.el.appendChild(e.holder),i=[["TouchStart","MouseDown"],["TouchMove","MouseMove"],["TouchEnd","MouseUp"],["TouchLeave","MouseLeave"]],f="onmouseleave"in window;for(a=0,l=i.length;a<l;a++)for(s=i[a],n=function(i){return function(e,s){return"TouchLeave"!==r&&"MouseLeave"!==r||f?s.el.addEventListener(r.toLowerCase(),function(t){return i[e](t,s)},!0):s.el.addEventListener("mouseout",function(t){return i._onMouseOut(t,s)},!0)}}(this),d=0,u=s.length;d<u;d++)r=s[d],n("_on"+s[0],e);return this._setSides(e),e},T.prototype._getTransform=function(t){return(this.horizontalFlip?"rotateZ(-90deg)":"")+" translateZ(-"+this.size/2+"px) rotateX("+t+"deg)"},T.prototype._setContent=function(t,e){var s,i,r,n;if(t&&e){if("object"==typeof e)for(s in i=e.style,n=e.value,i)r=i[s],t.style[s]=r;else n=e;return E.test(n)?(t.innerHTML="",t.style.backgroundImage="url('"+n+"')"):(t.style.backgroundImage="none",t.innerHTML=n)}},T.prototype._setSides=function(t){var e,s,i,r,n,o,a;if(t.holder.style[x.transform]=this._getTransform(t.delta),t.offset=i=Math.floor(t.delta/90),i!==t.lastOffset)return t.lastOffset=s=o=i,n=(r=this.sets[t.set]).length,i<0&&(s=o=++i,i<0&&(n<-i?(o=n- -i%n)===n&&(o=0):o=n+i,4<-i?4===(s=4- -i%4)&&(s=0):s=4+i)),n<=o&&(o%=n),4<=s&&(s%=4),-1===(a=s-1)&&(a=3),4===(e=s+1)&&(e=0),this._setContent(t[d[a]],r[o-1]||r[n-1]),this._setContent(t[d[e]],r[o+1]||r[0])},T.prototype._onTouchStart=function(t,e){return e.touchStarted=!0,e.holder.classList.add("no-tween"),"touchstart"===t.type?e.start=t.touches[0][this.eProp]:e.start=t[this.eProp]},T.prototype._onTouchMove=function(t,e){if(e.touchStarted)return t.preventDefault(),"touchmove"===t.type?e.diff=(t.touches[0][this.eProp]-e.start)*this.touchSensitivity:e.diff=(t[this.eProp]-e.start)*this.touchSensitivity,e.delta=e.last-e.diff,this._setSides(e)},T.prototype._onTouchEnd=function(t,e){var s;return e.touchStarted=!1,(s=e.delta%90)<45?e.last=e.delta+s:0<e.delta?e.last=e.delta+s:e.last=e.delta-(90-s),e.last%90!=0&&(e.last-=e.last%90),e.holder.classList.remove("no-tween"),e.holder.style[x.transform]=this._getTransform(e.last)},T.prototype._onTouchLeave=function(t,e){if(e.touchStarted)return t.relatedTarget&&!e.el.contains(t.relatedTarget)?this._onTouchEnd(t,e):void 0},T.prototype._onMouseOut=function(t,e){if(e.touchStarted)return t.relatedTarget&&!e.el.contains(t.relatedTarget)?this._onTouchEnd(t,e):void 0},T.prototype.setValue=function(t){var e,s,i,r,n,o;for(i in t)if(r=t[i],this.sets[i]&&!this.cubes[i].touchStarted){if(r=r.toString(),e=this.cubes[i],void 0!==this.sets[i][0]&&void 0!==this.sets[i][0].value){for(n=[],o=0;o<this.sets[i].length;o++)n.push(this.sets[i][o].value);s=n.indexOf(r)}else s=this.sets[i].indexOf(r);r=this.sets[i][s],e.delta=e.last=90*s,this._setSides(e),this._setContent(e[d[s%4]],r)}return this},T.prototype.getValue=function(){var t,e,s,i,r,n;for(r in i=[],s=this.cubes)t=s[r],n=(r=this.sets[r]).length,(e=t.last/90)<0&&(n<-e?(e=n- -e%n)===n&&(e=0):e=n+e),n<=e&&(e%=n),"object"==typeof r[e]?i.push(r[e].value):i.push(r[e]);return i},T.prototype.flipCube=function(t,e){var s;if(!(s=this.cubes[t]).touchStarted)return s.delta=s.last+=e?-90:90,this._setSides(s),this},T.prototype.flipCubeBack=function(t){return this.flipCube(t,!0)},T.prototype.flip=function(t){var e;for(e in this.cubes)this.flipCube(e,t);return this},T.prototype.flipBack=function(){return this.flip(!0)},T}(),("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=l:("undefined"!=typeof define&&null!==define?define.amd:void 0)?define(function(){return l}):window.HexaFlip=l,"undefined"!=typeof window&&null!==window&&(h=window.jQuery||window.$)&&h.data&&(h.prototype.hexaFlip=function(t,e){var s,i,r,n,o,a;if(!x.transform)return this;if("string"==typeof t)return a=t,"function"==typeof l.prototype[a]&&(r=h.data(this[0],u))?((s=Array.prototype.slice.call(arguments)).shift(),r[a](s)):this;for(n=0,o=this.length;n<o;n++)i=this[n],h.data(i,u)||h.data(i,u,new l(i,t,e));return this})}).call(this);